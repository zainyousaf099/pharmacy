{% extends "base.html" %}
{% load static %}

{% block title %}ROLE - SELECTION{% endblock title %}

{% block style %}
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, sans-serif;
  }

  body {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #111;
    overflow: hidden;
  }

  .container {
    display: flex;
    width: 100%;
    height: 100%;
  }

  .panel {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    text-decoration: none;
    transition: transform 0.3s ease, opacity 0.3s ease;
    z-index: 1;
  }

  .panel:hover {
    transform: scale(1.05);
    opacity: 0.9;
  }

  .doctor {
    background: linear-gradient(
      to top right,
      #202020 0%,
      #202020 30%,
      #5a0000 65%,
      #a00 100%
    );
  }

  .reception {
    background: linear-gradient(
      to top left,
      #202020 0%,
      #202020 30%,
      #003080 65%,
      #001a66 100%
    );
  }

  .pharmacy {
    background: linear-gradient(
      to top left,
      #202020 0%,
      #202020 30%,
      #046600 65%,
      #064d00 100%
    );
  }

  /* --- Animation Overlay --- */
  .overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 0;
    height: 100%;
    z-index: 999;
    transition: width 0.8s ease-in-out;
  }

  .overlay.expand {
    width: 100%;
  }
</style>
{% endblock style %}

{% block content %}
<div class="container">
  <a href="{% url 'doctor_login' %}"
     class="panel doctor"
     onclick="expandPanel(event, 'doctor', '{% url 'doctor_login' %}')">
     Doctorâ€™s Panel
  </a>
  <a href="{% url 'opd_login' %}"
     class="panel reception"
     onclick="expandPanel(event, 'reception', '{% url 'opd_login' %}')">
     OPD/Reception
  </a>
  <a href="{% url 'pharmacy_login' %}"
     class="panel pharmacy"
     onclick="expandPanel(event, 'pharmacy', '{% url 'pharmacy_login' %}')">
     Pharmacy
  </a>
</div>

<!-- Overlay for animation -->
<div class="overlay" id="overlay"></div>
{% endblock content %}

{% block js %}
<script>
  function expandPanel(e, panelType, targetUrl) {
    e.preventDefault(); // stop immediate navigation

    const overlay = document.getElementById("overlay");

    // Apply the right gradient
    if (panelType === "doctor") {
      overlay.style.background =
        "linear-gradient(to top right, #202020 0%, #202020 30%, #5a0000 65%, #a00 100%)";
    } else if (panelType === "reception") {
      overlay.style.background =
        "linear-gradient(to top left, #202020 0%, #202020 30%, #003080 65%, #001a66 100%)";
    } else if (panelType === "pharmacy") {
      overlay.style.background =
        "linear-gradient(to top left, #202020 0%, #202020 30%, #046600 65%, #064d00 100%)";
    }

    overlay.classList.add("expand");

    // Redirect after the animation finishes
    setTimeout(() => {
      window.location.href = targetUrl;
    }, 900); // slightly longer than the CSS transition
  }
</script>
{% endblock js %}
